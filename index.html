<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>:3</title>
  <style>
    body {
      margin: 0;
      min-height: 100vh;
      background: radial-gradient(circle at 60% 20%, #ffe4e1 0%, #fff8f0 100%);
      font-family: 'Segoe UI', 'Arial', sans-serif;
      overflow: hidden;
      position: relative;
    }
    .sparkle {
      position: absolute;
      border-radius: 50%;
      pointer-events: none;
      animation: sparkle 2.5s linear infinite;
      opacity: 0.7;
    }
    @keyframes sparkle {
      0% { transform: scale(0.7) translateY(0); opacity: 0.7;}
      50% { transform: scale(1.2) translateY(-20px); opacity: 1;}
      100% { transform: scale(0.7) translateY(0); opacity: 0.7;}
    }
    header {
      width: 100%;
      text-align: center;
      padding: 32px 0 0 0;
      font-size: 2.6em;
      color: #b85c38;
      letter-spacing: 2px;
      font-weight: bold;
      text-shadow: 0 2px 12px #ffe4e1;
      user-select: none;
    }
    .subtitle {
      text-align: center;
      font-size: 1.1em;
      color: #d2691e;
      margin-bottom: 18px;
      letter-spacing: 1px;
      text-shadow: 0 1px 8px #ffe4e1;
      font-weight: 500;
      user-select: none;
    }
    #counter {
      position: absolute;
      top: 24px;
      right: 32px;
      background: #fff8f0ee;
      color: #b85c38;
      font-size: 1.3em;
      padding: 10px 24px 10px 18px;
      border-radius: 24px;
      box-shadow: 0 2px 12px #ffe4e1;
      font-weight: 600;
      user-select: none;
      display: flex;
      align-items: center;
      gap: 10px;
      transition: background 0.3s;
      z-index: 2;
    }
    #counter .icon {
      font-size: 1.5em;
      animation: bounce 1.2s infinite;
    }
    @keyframes bounce {
      0%, 100% { transform: translateY(0);}
      50% { transform: translateY(-8px);}
    }
    .game-area {
      display: flex;
      justify-content: center;
      align-items: center;
      margin-top: 12px;
      z-index: 1;
    }
    canvas {
      background: linear-gradient(180deg, #ffe4e1 0%, #fff8f0 100%);
      border: 4px solid #ffb6c1;
      border-radius: 24px;
      box-shadow: 0 8px 32px #ffb6c1aa, 0 0 0 8px #fff8f088;
      margin: 0 auto;
      display: block;
      transition: box-shadow 0.3s;
    }
    #scoreboard {
      width: 340px;
      margin: 24px auto 0 auto;
      background: #fff8f0ee;
      border-radius: 18px;
      box-shadow: 0 2px 12px #ffe4e1;
      padding: 18px 24px 12px 24px;
      text-align: center;
      font-size: 1.1em;
      color: #b85c38;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
      position: relative;
      z-index: 1;
    }
    #scoreLabel {
      font-weight: bold;
      margin-bottom: 4px;
      letter-spacing: 1px;
      color: #d2691e;
      text-shadow: 0 1px 8px #ffe4e1;
      font-size: 1em;
    }
    #scoreBar {
      width: 90%;
      height: 18px;
      background: #ffe4e1;
      border-radius: 9px;
      overflow: hidden;
      margin-bottom: 6px;
      box-shadow: 0 1px 6px #ffb6c1aa;
      position: relative;
    }
    #scoreFill {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #ffb6c1 0%, #ffb6c1 80%, #fff8f0 100%);
      border-radius: 9px;
      transition: width 0.3s;
      position: absolute;
      left: 0;
      top: 0;
    }
    #scoreText {
      font-size: 1.05em;
      font-weight: 500;
      letter-spacing: 1px;
      color: #5e2b2b;
    }
    #poem {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(255, 248, 240, 0.97);
      color: #5e2b2b;
      display: flex;
      justify-content: center;
      align-items: center;
      text-align: center;
      font-size: 1.7em;
      padding: 20px;
      box-sizing: border-box;
      display: none;
      animation: fadeIn 1.2s ease;
      z-index: 10;
      flex-direction: column;
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    #poem div {
      background: #fff8f0;
      border-radius: 32px;
      box-shadow: 0 8px 32px #ffe4e1;
      padding: 40px 32px;
      border: 3px solid #ffb6c1;
      margin-bottom: 24px;
      font-size: 1.1em;
      line-height: 1.5em;
      animation: poemPop 1.2s;
    }
    @keyframes poemPop {
      0% { transform: scale(0.8); opacity: 0;}
      100% { transform: scale(1); opacity: 1;}
    }
    #restartBtn {
      padding: 12px 32px;
      font-size: 1.1em;
      background: #ffb6c1;
      color: #b85c38;
      border: none;
      border-radius: 18px;
      box-shadow: 0 2px 8px #ffe4e1;
      cursor: pointer;
      font-weight: bold;
      transition: background 0.2s;
    }
    #restartBtn:hover {
      background: #ffe4e1;
    }
    @media (max-width: 500px) {
      header { font-size: 1.5em; padding: 18px 0 0 0;}
      .subtitle { font-size: 0.95em;}
      #counter { font-size: 1em; padding: 8px 12px;}
      canvas { width: 98vw !important; height: 60vw !important;}
      #poem div { padding: 18px 8px; font-size: 0.95em;}
      #scoreboard {
        width: 98vw;
        padding: 10px 6vw 8px 6vw;
        font-size: 0.98em;
      }
      #scoreBar { height: 14px; }
      #scoreLabel { font-size: 0.8em;}
      #scoreText { font-size: 0.8em;}
    }
  </style>
</head>
<body>
<header>:3</header>
<div class="subtitle">Catch the gifts! Use <b>‚Üê</b> and <b>‚Üí</b> to move.</div>
<div id="counter"><span class="icon">üéà</span> Gifts Caught: <span id="caughtNum">0</span> / 10</div>
<div class="game-area">
  <canvas id="gameCanvas" width="400" height="600"></canvas>
</div>
<div id="scoreboard">
  <div id="scoreLabel">Progress</div>
  <div id="scoreBar">
    <div id="scoreFill"></div>
  </div>
  <div id="scoreText"><span id="scoreCurrent">0</span> / 10</div>
</div>
<div id="poem">
  <div>
    Because you paused,<br>
    even when things were heavy and uncertain,<br>
    still you wrote‚Äî<br>
    and gave me something.<br><br>
    Because you looked and truly saw,<br>
    the quiet fears I tried to hide and draw.<br>
    Because your voice lingered and stayed,<br>
    even when louder winds had long decayed.<br><br>
    Because you gave, not gold, but effort and time,<br>
    not polished words, but steady rhyme.<br>
    Because you put love and care in all you do,<br>
    this simple game says thank you.
  </div>
  <button id="restartBtn">Play Again</button>
</div>
<script>
  // Sparkle effect
  for (let i = 0; i < 18; i++) {
    const s = document.createElement('div');
    s.className = 'sparkle';
    s.style.width = s.style.height = (8 + Math.random() * 12) + 'px';
    s.style.left = (Math.random() * 98) + 'vw';
    s.style.top = (Math.random() * 98) + 'vh';
    s.style.background = 'radial-gradient(circle, #ffb6c1 0%, #fff8f0 80%)';
    s.style.animationDelay = (Math.random() * 2.5) + 's';
    document.body.appendChild(s);
  }

  const canvas = document.getElementById("gameCanvas");
  const ctx = canvas.getContext("2d");

  const player = { x: 180, width: 48, height: 24, speed: 6, bounce: 0 };
  let keys = {};
  let gifts = [];
  const giftIcons = ["üì¨", "üéÅ", "üåª", "üç´", "üß∏", "üíå", "üå∏", "üç∞"];
  let caught = 0;
  const maxCaught = 10;
  const poemDiv = document.getElementById("poem");
  const counterDiv = document.getElementById("counter");
  const caughtNum = document.getElementById("caughtNum");
  const restartBtn = document.getElementById("restartBtn");
  const scoreFill = document.getElementById("scoreFill");
  const scoreCurrent = document.getElementById("scoreCurrent");

  document.addEventListener("keydown", (e) => keys[e.key] = true);
  document.addEventListener("keyup", (e) => keys[e.key] = false);

  function spawnGift() {
    gifts.push({
      x: Math.random() * (canvas.width - 32),
      y: -40,
      speed: 2.2 + Math.random() * 2.2,
      icon: giftIcons[Math.floor(Math.random() * giftIcons.length)],
      bounce: Math.random() * Math.PI * 2
    });
  }

  function drawPlayer() {
    // Bounce effect
    player.bounce += 0.18;
    let bounceY = Math.sin(player.bounce) * 4;

    ctx.save();
    ctx.shadowColor = "#b85c38";
    ctx.shadowBlur = 16;
    ctx.fillStyle = "#d2691e";
    ctx.beginPath();
    ctx.moveTo(player.x + 8, canvas.height - 40 + bounceY);
    ctx.lineTo(player.x + player.width - 8, canvas.height - 40 + bounceY);
    ctx.quadraticCurveTo(player.x + player.width, canvas.height - 40 + bounceY, player.x + player.width, canvas.height - 40 + 8 + bounceY);
    ctx.lineTo(player.x + player.width, canvas.height - 40 + player.height - 8 + bounceY);
    ctx.quadraticCurveTo(player.x + player.width, canvas.height - 40 + player.height + bounceY, player.x + player.width - 8, canvas.height - 40 + player.height + bounceY);
    ctx.lineTo(player.x + 8, canvas.height - 40 + player.height + bounceY);
    ctx.quadraticCurveTo(player.x, canvas.height - 40 + player.height + bounceY, player.x, canvas.height - 40 + player.height - 8 + bounceY);
    ctx.lineTo(player.x, canvas.height - 40 + 8 + bounceY);
    ctx.quadraticCurveTo(player.x, canvas.height - 40 + bounceY, player.x + 8, canvas.height - 40 + bounceY);
    ctx.closePath();
    ctx.fill();
    ctx.restore();

    // Draw a heart on the player
    ctx.font = "24px serif";
    ctx.fillText("‚ù§Ô∏è", player.x + player.width / 2 - 12, canvas.height - 40 + player.height / 2 + 8 + bounceY);
  }

  function drawGift(gift) {
    // Bounce effect for gifts
    gift.bounce += 0.13;
    let bounceY = Math.sin(gift.bounce) * 6;

    ctx.save();
    ctx.shadowColor = "#ffb6c1";
    ctx.shadowBlur = 10;
    ctx.font = "36px serif";
    ctx.fillText(gift.icon, gift.x, gift.y + bounceY);
    ctx.restore();
  }

  function updateScoreboard() {
    scoreCurrent.textContent = caught;
    scoreFill.style.width = Math.min((caught / maxCaught) * 100, 100) + "%";
  }

  function update() {
    if (keys["ArrowLeft"] && player.x > 0) player.x -= player.speed;
    if (keys["ArrowRight"] && player.x < canvas.width - player.width) player.x += player.speed;

    ctx.clearRect(0, 0, canvas.width, canvas.height);
    drawPlayer();

    for (let i = gifts.length - 1; i >= 0; i--) {
      let gift = gifts[i];
      gift.y += gift.speed;
      drawGift(gift);

      // Collision
      if (
        gift.y > canvas.height - 60 &&
        gift.x > player.x - 20 &&
        gift.x < player.x + player.width + 20
      ) {
        gifts.splice(i, 1);
        caught++;
        caughtNum.textContent = caught;
        updateScoreboard();
        counterDiv.style.background = "#ffe4e1";
        setTimeout(() => counterDiv.style.background = "#fff8f0ee", 180);
        if (caught >= maxCaught) {
          poemDiv.style.display = "flex";
          return;
        }
      } else if (gift.y > canvas.height) {
        gifts.splice(i, 1); // remove missed gift
      }
    }

    requestAnimationFrame(update);
  }

  setInterval(spawnGift, 1000);
  update();

  restartBtn.onclick = function() {
    caught = 0;
    caughtNum.textContent = caught;
    updateScoreboard();
    gifts = [];
    poemDiv.style.display = "none";
    update();
  };
</script>
</body>
</html>
